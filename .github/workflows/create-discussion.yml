name: Create GitHub Discussion Daily

on:
  schedule:
    - cron: "0 0 * * *"  # ë§¤ì¼ 00:00 UTC (í•œêµ­ ì‹œê°„ 09:00)
  workflow_dispatch:  # ìˆ˜ë™ ì‹¤í–‰ ê°€ëŠ¥

jobs:
  create-discussion:
    runs-on: ubuntu-latest
    steps:
      - name: Get current date
        id: date
        run: echo "DATE=$(date -u '+%m/%d (%a)')" >> $GITHUB_ENV

      - name: Create GitHub Discussion
        env:
          GH_TOKEN: ${{ secrets.GH_PAT }}
        run: |
          gh api graphql -f query='
            mutation {
              createDiscussion(input: {
                repositoryId: "'"$(gh api graphql -f query='{repository(owner:\"OWNER\", name:\"REPO\"){id}}' --jq '.data.repository.id')"'",
                categoryId: "CATEGORY_ID",
                title: "'"${{ env.DATE }} My Study Diary"'",
                body: "
                ## ğŸ“… ${{ env.DATE }} My Study Diary  
                ì˜¤ëŠ˜ì˜ ê¸°ì—¬ ë‚´ìš©ì„ ì•„ë˜ ì–‘ì‹ì— ë§ì¶° ì‘ì„±í•´ì£¼ì„¸ìš”.  

                ---

                ### âœ¨ ì˜¤ëŠ˜ í•œ ì¼
                - âœ…  
                - âœ…  

                ### ğŸ’¡ ë°°ìš´ ì  & ê³ ë¯¼ ì‚¬í•­
                - ğŸ¤”  
                - ğŸ¤”  

                ### ğŸ¯ ë‚´ì¼ ëª©í‘œ
                - ğŸ¯  
                - ğŸ¯  

                ---
                "
              }) {
                discussion {
                  url
                }
              }
            }'